!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.request=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function doRequest(e,t,r,o){var n=new Promise(function(n,s){function i(o){doRequest(e,t,{qs:r.qs,headers:r.headers,timeout:r.timeout}).nodeify(function(e,t){var u=e||t.statusCode>=400;if("function"==typeof r.retry&&(u=r.retry(e,t,o+1)),o>=(5|r.maxRetries)&&(u=!1),u){var a=r.retryDelay;"function"==typeof r.retryDelay&&(a=r.retryDelay(e,t,o+1)),a=a||200,setTimeout(function(){i(o+1)},a)}else e?s(e):n(t)})}var u=new window.XMLHttpRequest;if("string"!=typeof e)throw new TypeError("The method must be a string.");if("string"!=typeof t)throw new TypeError("The URL/path must be a string.");if("function"==typeof r&&(o=r,r={}),(null===r||void 0===r)&&(r={}),"object"!=typeof r)throw new TypeError("Options must be an object (or null).");if("function"!=typeof o&&(o=void 0),e=e.toUpperCase(),r.headers=r.headers||{},r.retry&&"GET"===e)return i(0);var a,d=!(!(a=/^([\w-]+:)?\/\/([^\/]+)/.exec(r.uri))||a[2]==window.location.host);if(d||(r.headers["X-Requested-With"]="XMLHttpRequest"),r.qs&&(t=handleQs(t,r.qs)),r.json&&(r.body=JSON.stringify(r.json),r.headers["Content-Type"]="application/json"),r.timeout){u.timeout=r.timeout;var f=Date.now();u.ontimeout=function(){var e=Date.now()-f,t=new Error("Request timed out after "+e+"ms");t.timeout=!0,t.duration=e,s(t)}}u.onreadystatechange=function(){if(4===u.readyState){var e={};u.getAllResponseHeaders().split("\r\n").forEach(function(t){var r=t.split(":");r.length>1&&(e[r[0].toLowerCase()]=r.slice(1).join(":").trim())});var r=new Response(u.status,e,u.responseText);r.url=t,n(r)}},u.open(e,t,!0);for(var p in r.headers)u.setRequestHeader(p,r.headers[p]);u.send(r.body?r.body:null)});return n.getBody=function(){return n.then(function(e){return e.getBody()})},n.nodeify(o)}var Promise=require("promise"),Response=require("http-response-object"),handleQs=require("./lib/handle-qs.js");module.exports=doRequest;
},{"./lib/handle-qs.js":2,"http-response-object":4,"promise":5}],2:[function(require,module,exports){
"use strict";function handleQs(r,s){r=r.split("?");var i=r[0],e=(r[1]||"").split("#")[0],t=r[1]&&r[1].split("#").length>1?"#"+r[1].split("#")[1]:"",n=parse(e);for(var a in s)n[a]=s[a];return e=stringify(n),""!==e&&(e="?"+e),i+e+t}var parse=require("qs").parse,stringify=require("qs").stringify;module.exports=handleQs;
},{"qs":11}],3:[function(require,module,exports){
function drainQueue(){if(!draining){draining=!0;for(var e,o=queue.length;o;){e=queue,queue=[];for(var r=-1;++r<o;)e[r]();o=queue.length}draining=!1}}function noop(){}var process=module.exports={},queue=[],draining=!1;process.nextTick=function(e){queue.push(e),draining||setTimeout(drainQueue,0)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};
},{}],4:[function(require,module,exports){
"use strict";function Response(t,e,s){if("number"!=typeof t)throw new TypeError("statusCode must be a number but was "+typeof t);if(null===e)throw new TypeError("headers cannot be null");if("object"!=typeof e)throw new TypeError("headers must be an object but was "+typeof e);this.statusCode=t,this.headers={};for(var o in e)this.headers[o.toLowerCase()]=e[o];this.body=s}module.exports=Response,Response.prototype.getBody=function(t){if(this.statusCode>=300){var e=new Error("Server responded with status code "+this.statusCode+":\n"+this.body.toString());throw e.statusCode=this.statusCode,e.headers=this.headers,e.body=this.body,e}return t?this.body.toString(t):this.body};
},{}],5:[function(require,module,exports){
"use strict";module.exports=require("./lib/core.js"),require("./lib/done.js"),require("./lib/es6-extensions.js"),require("./lib/node-extensions.js");
},{"./lib/core.js":6,"./lib/done.js":7,"./lib/es6-extensions.js":8,"./lib/node-extensions.js":9}],6:[function(require,module,exports){
"use strict";function Promise(e){function n(e){return null===i?void c.push(e):void asap(function(){var n=i?e.onFulfilled:e.onRejected;if(null===n)return void(i?e.resolve:e.reject)(u);var t;try{t=n(u)}catch(o){return void e.reject(o)}e.resolve(t)})}function t(e){try{if(e===f)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void doResolve(n.bind(e),t,o)}i=!0,u=e,r()}catch(c){o(c)}}function o(e){i=!1,u=e,r()}function r(){for(var e=0,t=c.length;t>e;e++)n(c[e]);c=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");var i=null,u=null,c=[],f=this;this.then=function(e,t){return new f.constructor(function(o,r){n(new Handler(e,t,o,r))})},doResolve(e,t,o)}function Handler(e,n,t,o){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.resolve=t,this.reject=o}function doResolve(e,n,t){var o=!1;try{e(function(e){o||(o=!0,n(e))},function(e){o||(o=!0,t(e))})}catch(r){if(o)return;o=!0,t(r)}}var asap=require("asap");module.exports=Promise;
},{"asap":10}],7:[function(require,module,exports){
"use strict";var Promise=require("./core.js"),asap=require("asap");module.exports=Promise,Promise.prototype.done=function(){var e=arguments.length?this.then.apply(this,arguments):this;e.then(null,function(e){asap(function(){throw e})})};
},{"./core.js":6,"asap":10}],8:[function(require,module,exports){
"use strict";function ValuePromise(e){this.then=function(r){return"function"!=typeof r?this:new Promise(function(n,t){asap(function(){try{n(r(e))}catch(o){t(o)}})})}}var Promise=require("./core.js"),asap=require("asap");module.exports=Promise,ValuePromise.prototype=Promise.prototype;var TRUE=new ValuePromise(!0),FALSE=new ValuePromise(!1),NULL=new ValuePromise(null),UNDEFINED=new ValuePromise(void 0),ZERO=new ValuePromise(0),EMPTYSTRING=new ValuePromise("");Promise.resolve=function(e){if(e instanceof Promise)return e;if(null===e)return NULL;if(void 0===e)return UNDEFINED;if(e===!0)return TRUE;if(e===!1)return FALSE;if(0===e)return ZERO;if(""===e)return EMPTYSTRING;if("object"==typeof e||"function"==typeof e)try{var r=e.then;if("function"==typeof r)return new Promise(r.bind(e))}catch(n){return new Promise(function(e,r){r(n)})}return new ValuePromise(e)},Promise.all=function(e){var r=Array.prototype.slice.call(e);return new Promise(function(e,n){function t(i,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var f=u.then;if("function"==typeof f)return void f.call(u,function(e){t(i,e)},n)}r[i]=u,0===--o&&e(r)}catch(c){n(c)}}if(0===r.length)return e([]);for(var o=r.length,i=0;i<r.length;i++)t(i,r[i])})},Promise.reject=function(e){return new Promise(function(r,n){n(e)})},Promise.race=function(e){return new Promise(function(r,n){e.forEach(function(e){Promise.resolve(e).then(r,n)})})},Promise.prototype["catch"]=function(e){return this.then(null,e)};
},{"./core.js":6,"asap":10}],9:[function(require,module,exports){
"use strict";var Promise=require("./core.js"),asap=require("asap");module.exports=Promise,Promise.denodeify=function(n,t){return t=t||1/0,function(){var e=this,o=Array.prototype.slice.call(arguments);return new Promise(function(r,i){for(;o.length&&o.length>t;)o.pop();o.push(function(n,t){n?i(n):r(t)});var u=n.apply(e,o);!u||"object"!=typeof u&&"function"!=typeof u||"function"!=typeof u.then||r(u)})}},Promise.nodeify=function(n){return function(){var t=Array.prototype.slice.call(arguments),e="function"==typeof t[t.length-1]?t.pop():null,o=this;try{return n.apply(this,arguments).nodeify(e,o)}catch(r){if(null===e||"undefined"==typeof e)return new Promise(function(n,t){t(r)});asap(function(){e.call(o,r)})}}},Promise.prototype.nodeify=function(n,t){return"function"!=typeof n?this:void this.then(function(e){asap(function(){n.call(t,null,e)})},function(e){asap(function(){n.call(t,e)})})};
},{"./core.js":6,"asap":10}],10:[function(require,module,exports){
(function (process){
function flush(){for(;head.next;){head=head.next;var e=head.task;head.task=void 0;var s=head.domain;s&&(head.domain=void 0,s.enter());try{e()}catch(n){if(isNodeJS)throw s&&s.exit(),setTimeout(flush,0),s&&s.enter(),n;setTimeout(function(){throw n},0)}s&&s.exit()}flushing=!1}function asap(e){tail=tail.next={task:e,domain:isNodeJS&&process.domain,next:null},flushing||(flushing=!0,requestFlush())}var head={task:void 0,next:null},tail=head,flushing=!1,requestFlush=void 0,isNodeJS=!1;if("undefined"!=typeof process&&process.nextTick)isNodeJS=!0,requestFlush=function(){process.nextTick(flush)};else if("function"==typeof setImmediate)requestFlush="undefined"!=typeof window?setImmediate.bind(window,flush):function(){setImmediate(flush)};else if("undefined"!=typeof MessageChannel){var channel=new MessageChannel;channel.port1.onmessage=flush,requestFlush=function(){channel.port2.postMessage(0)}}else requestFlush=function(){setTimeout(flush,0)};module.exports=asap;
}).call(this,require('_process'))

},{"_process":3}],11:[function(require,module,exports){
module.exports=require("./lib/");
},{"./lib/":12}],12:[function(require,module,exports){
var Stringify=require("./stringify"),Parse=require("./parse"),internals={};module.exports={stringify:Stringify,parse:Parse};
},{"./parse":13,"./stringify":14}],13:[function(require,module,exports){
var Utils=require("./utils"),internals={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3};internals.parseValues=function(e,r){for(var t={},i=e.split(r.delimiter,1/0===r.parameterLimit?void 0:r.parameterLimit),a=0,n=i.length;n>a;++a){var s=i[a],l=-1===s.indexOf("]=")?s.indexOf("="):s.indexOf("]=")+1;if(-1===l)t[Utils.decode(s)]="";else{var p=Utils.decode(s.slice(0,l)),m=Utils.decode(s.slice(l+1));t[p]=t.hasOwnProperty(p)?[].concat(t[p]).concat(m):m}}return t},internals.parseObject=function(e,r,t){if(!e.length)return r;var i=e.shift(),a={};if("[]"===i)a=[],a=a.concat(internals.parseObject(e,r,t));else{var n="["===i[0]&&"]"===i[i.length-1]?i.slice(1,i.length-1):i,s=parseInt(n,10),l=""+s;!isNaN(s)&&i!==n&&l===n&&s>=0&&s<=t.arrayLimit?(a=[],a[s]=internals.parseObject(e,r,t)):a[n]=internals.parseObject(e,r,t)}return a},internals.parseKeys=function(e,r,t){if(e){var i=/^([^\[\]]*)/,a=/(\[[^\[\]]*\])/g,n=i.exec(e);if(!Object.prototype.hasOwnProperty(n[1])){var s=[];n[1]&&s.push(n[1]);for(var l=0;null!==(n=a.exec(e))&&l<t.depth;)++l,Object.prototype.hasOwnProperty(n[1].replace(/\[|\]/g,""))||s.push(n[1]);return n&&s.push("["+e.slice(n.index)+"]"),internals.parseObject(s,r,t)}}},module.exports=function(e,r){if(""===e||null===e||"undefined"==typeof e)return{};r=r||{},r.delimiter="string"==typeof r.delimiter||Utils.isRegExp(r.delimiter)?r.delimiter:internals.delimiter,r.depth="number"==typeof r.depth?r.depth:internals.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:internals.arrayLimit,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:internals.parameterLimit;for(var t="string"==typeof e?internals.parseValues(e,r):e,i={},a=Object.keys(t),n=0,s=a.length;s>n;++n){var l=a[n],p=internals.parseKeys(l,t[l],r);i=Utils.merge(i,p)}return Utils.compact(i)};
},{"./utils":15}],14:[function(require,module,exports){
var Utils=require("./utils"),internals={delimiter:"&",indices:!0};internals.stringify=function(e,n,i){if(Utils.isBuffer(e)?e=e.toString():e instanceof Date?e=e.toISOString():null===e&&(e=""),"string"==typeof e||"number"==typeof e||"boolean"==typeof e)return[encodeURIComponent(n)+"="+encodeURIComponent(e)];var t=[];if("undefined"==typeof e)return t;for(var r=Object.keys(e),o=0,s=r.length;s>o;++o){var a=r[o];t=t.concat(!i.indices&&Array.isArray(e)?internals.stringify(e[a],n,i):internals.stringify(e[a],n+"["+a+"]",i))}return t},module.exports=function(e,n){n=n||{};var i="undefined"==typeof n.delimiter?internals.delimiter:n.delimiter;n.indices="boolean"==typeof n.indices?n.indices:internals.indices;var t=[];if("object"!=typeof e||null===e)return"";for(var r=Object.keys(e),o=0,s=r.length;s>o;++o){var a=r[o];t=t.concat(internals.stringify(e[a],a,n))}return t.join(i)};
},{"./utils":15}],15:[function(require,module,exports){
var internals={};exports.arrayToObject=function(r){for(var e={},t=0,n=r.length;n>t;++t)"undefined"!=typeof r[t]&&(e[t]=r[t]);return e},exports.merge=function(r,e){if(!e)return r;if("object"!=typeof e)return Array.isArray(r)?r.push(e):r[e]=!0,r;if("object"!=typeof r)return r=[r].concat(e);Array.isArray(r)&&!Array.isArray(e)&&(r=exports.arrayToObject(r));for(var t=Object.keys(e),n=0,o=t.length;o>n;++n){var c=t[n],u=e[c];r[c]=r[c]?exports.merge(r[c],u):u}return r},exports.decode=function(r){try{return decodeURIComponent(r.replace(/\+/g," "))}catch(e){return r}},exports.compact=function(r,e){if("object"!=typeof r||null===r)return r;e=e||[];var t=e.indexOf(r);if(-1!==t)return e[t];if(e.push(r),Array.isArray(r)){for(var n=[],o=0,c=r.length;c>o;++o)"undefined"!=typeof r[o]&&n.push(r[o]);return n}var u=Object.keys(r);for(o=0,c=u.length;c>o;++o){var f=u[o];r[f]=exports.compact(r[f],e)}return r},exports.isRegExp=function(r){return"[object RegExp]"===Object.prototype.toString.call(r)},exports.isBuffer=function(r){return null===r||"undefined"==typeof r?!1:!!(r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer(r))};
},{}]},{},[1])(1)
});


//# sourceMappingURL=request.min.js.map